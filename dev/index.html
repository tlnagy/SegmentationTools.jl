<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Segment cells with Julia · SegmentationTools.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SegmentationTools.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Segment cells with Julia</a><ul class="internal"><li><a class="toctext" href="#Flow-1">Flow</a></li><li><a class="toctext" href="#Segmentation-1">Segmentation</a></li><li><a class="toctext" href="#Linking-1">Linking</a></li><li><a class="toctext" href="#Analysis-and-Plotting-1">Analysis and Plotting</a></li><li><a class="toctext" href="#Miscellaneous-1">Miscellaneous</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Segment cells with Julia</a></li></ul><a class="edit-page" href="https://github.com/tlnagy/SegmentationTools.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Segment cells with Julia</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Segment-cells-with-Julia-1" href="#Segment-cells-with-Julia-1">Segment cells with Julia</a></h1><p>Welcome to SegmentationTools.jl! This is a random collection of functions that I&#39;ve implemented for segmenting single cells from microscopy images.</p><h2><a class="nav-anchor" id="Flow-1" href="#Flow-1">Flow</a></h2><p>The general procedure follows the following format:</p><p>Segmentation -&gt; Linking -&gt; Analysis</p><h2><a class="nav-anchor" id="Segmentation-1" href="#Segmentation-1">Segmentation</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.segment_cells" href="#SegmentationTools.segment_cells"><code>SegmentationTools.segment_cells</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">segment_cells(img, seed_channel, segment_channel, maskfunc)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/segment.jl#L5-L7">source</a></section><h2><a class="nav-anchor" id="Linking-1" href="#Linking-1">Linking</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.build_tp_df" href="#SegmentationTools.build_tp_df"><code>SegmentationTools.build_tp_df</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">build_tp_df(img, thresholds; dist)</code></pre><p>Build a <code>DataFrames.DataFrame</code> that is compatible with trackpys <code>link_df</code> function. Needs to be converted to a <code>Pandas.DataFrame</code> before passing to trackpy. <code>dist</code> is a 2-tuple of integers indicating the minimum and maximum distance away in pixels from each cell to include in its local background calculation.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/segment.jl#L47-L55">source</a><div><div><p>Given an <code>img</code> with at least <code>y</code>, <code>x</code>, and <code>t</code> axes and a 3 dimensional boolean array, <code>thresholds</code>, in yxt order.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/segment.jl#L118-L121">source</a></section><p>I generally use it like so:</p><pre><code class="language-julia">particles = SegmentationTools.build_tp_df(img, thresholds);
using PyCall
tp = pyimport(&quot;trackpy&quot;)

import Pandas
# convert particles to a Pandas DataFrame and call trackpy
t = tp.link_df(Pandas.DataFrame(particles), 5);
linked = DataFrame(Pandas.DataFrame(t)); # convert back to Julian dataframe</code></pre><h2><a class="nav-anchor" id="Analysis-and-Plotting-1" href="#Analysis-and-Plotting-1">Analysis and Plotting</a></h2><p>It&#39;s often helpful to look at each cell quickly to validate the tracking and segmentation, which is where <a href="#SegmentationTools.create_cell_grid"><code>create_cell_grid</code></a> comes in handy. Let&#39;s create a XYT image that we&#39;ve segmented and tracked.</p><p>The <code>tracks</code> dataframe should have the following columns (<code>trackpy</code> outputs these by default):</p><ul><li><code>x</code>, <code>y</code>: the centroid coordinates</li><li><code>frame</code>: the time index</li><li><code>id</code>: the per-frame id that can vary over the time course.</li><li><code>particle</code>: a persistent <code>id</code> that is the same across all time points for a given particle. <code>trackpy</code> links up the different <code>id</code>s into one <code>particle</code> value.</li></ul><pre><code class="language-julia">using ImageShow
using DataFrames
using Colors
using SegmentationTools

img = zeros(Int, 25, 45, 1)
xs = 11:12:35
img[13, xs, 1] .= [1,2,3] # three equidistant dots
tracks = DataFrame(y=13, x=xs, frame=1:3, particle=1:3, id=1:3)
Gray.(img[:, :, 1]./4.0)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAABLCAAAAAB/pssZAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABBSURBVGje7dDBDcAgDANA08nKZmxWRusG4QkSd19bUeQEAAAAAO7V6vhN5urESMaq8yW9LDy7hzjsDwAAAAC42Q/qUAMGtoFnhgAAAABJRU5ErkJggg==" /><p>The corresponding cell grid will have the <code>particle</code> id displayed in the upper right corner and show the time course of the movie with the particle&#39;s centroid centered in the grid cell.</p><pre><code class="language-julia">result = SegmentationTools.create_cell_grid(img, tracks, win=10)
Gray.(result[:, :, 1])</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACEAQAAAAB5P74KAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAB/SURBVEjH7dTBCcAgDAXQX7x3goIrdgRH8+YajuAABUtsQ8GTyUFS8F/EdzBEMcAJypauttJ2QFx5JPogEM/iJMLV4wGNZI0kqKQGieCt/p1jT+gVmmSJWOtiiRGpXcqQ8EyQCf+4GeKKRrDPE+Ud4gfS5o9YrHWxxIjULkNyA6nqDk0utMBhAAAAAElFTkSuQmCC" /><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.create_cell_grid" href="#SegmentationTools.create_cell_grid"><code>SegmentationTools.create_cell_grid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">create_cell_grid(img, tracks; win) -&gt; grid</code></pre><p>Given a xyt image and set of tracks, creates a grid of all tracked cells with the cells centered in their grid location. Helps to quickly diagnose weird cell  segmentation behavior.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/diagnostics.jl#L1-L7">source</a></section><h4><a class="nav-anchor" id="Observing-cell-localities-1" href="#Observing-cell-localities-1">Observing cell localities</a></h4><p>For low signal-to-noise applications, it can be useful to compute the local background to normalize against. The nonexported function, <a href="#SegmentationTools._get_locality_mask"><code>SegmentationTools._get_locality_mask</code></a>, can be used to display the localities used in <a href="#SegmentationTools.build_tp_df"><code>SegmentationTools.build_tp_df</code></a> to diagnose any weird behaviors.</p><pre><code class="language-julia">using FileIO, Images, SegmentationTools
slice = FileIO.load(&quot;https://user-images.githubusercontent.com/1661487/64392405-81a30500-d001-11e9-8262-744f76ff2f69.png&quot;)
components = label_components(Bool.(slice))
foreground = components .&gt; 0.0
locals = Array{RGB{Float64}, 2}[]
gold = RGB((255,215,0)./255...)
orchid = RGB((186,85,211)./255...)
for i in 1:maximum(components)
    mask = components .== i
    result = RGB(0.5, 0.5, 0.5) .* foreground
    result .+= gold .* (Float64.(SegmentationTools._get_locality_mask(mask, foreground, dist=(10, 60))))
    result[mask] .= orchid
    push!(locals, result)
end
reshape(locals, (:, 6))</code></pre><table><tbody><tr><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICBYWFhISEgwKABANgAQDQC/oQD/1wDPrwCfhgA4ODjvygBgUQBQQwCvlACPeQAjECh0NYSLQJ5GIE8MBQ26VdOAOpGuUMYuFTWXRatpMHcgGwD////kELb4AAAAAWJLR0QmWgiYtQAAA2lJREFUaN7tmuly2jAQgJGELNsE8FEbCCm0tHn/V6ysC9nWCYiZznh/kXjg096rhdUqTgBUAiLfGkNBay4IZ+koK8IheZGQsVplhGqDSEpFmICyTOiSRRZZZJFFFllkkRdLkXSelBA6iJHEDDbtrfPE056YXMukEDmFp6WUYtRP6xhJgUkp5B2UQrgFpby2ZLlQBadURXolPl2ysgy+7mgRRu9IpZ0Fxg8znEc4U1JKwCrAxozJSoxGGZVtokJG5GReunKzyKfPYsMfct/LeDZRDNVB/iuUgvkVHzko2FAdPlAUhZ2KSAsYKVCuG/SIKmK8zzoYyVTauHQZx0ZW0niJLBjYcNypE2apW8CPOApvZZYyI0PjBbUOYEgsqQwgWucwfdsGNPGBqzT8D5K94/y0XuUk+ajGogvBpNu/e6ZsUmJU1ifFwPU7MHddUmakbImO6rLdCdk/gcGyWNsWwFUtpKnax0lSnR+jqk+gLHqKwkjt9lEMQbPOQ+5dYkSp667qwxWiBZqKMBJvi/OuTwyUQaFDqDfGXZ22xVH6Ey0e5pS6C7KbiixkqWBQm0cNFMoJUOeeJaWTwh4bKVQdr3egj4K9lLo++jBeij4G2ihejBomrBcB6PFLCEZ533qnwffHdooXwxPRXobZOYxZGWW0IStdDXKYRXmRdlH8IeARNTY5KXX/HEWJmxKSns9T6uZJm4VRXmQzH6V7tONEUer2LZSXKOOlvEQZP8WqDAgfwP0US5gVEIV/aR1AMeYMvy+HfgF/6ne7tuqcmJ3hffiBLdO2dXFM/ofuRmmRwx3T0SlzpJ7BZM4FQwCm6XlMbfvGYbKH93I9+0CtpeyPfkrgBuHz/PX188I+tKknfWvfWB0TSfm6Uvl1EcpMmmMvKNVLKNczP7qA0H6Oga7MnGLahnkpvz+H1wfud7Y85rNHb6Go/XJgkeEUrszoE4imzIQCCIpTRVK4MvNjViaKGl6VKmC4dmVeyvUm/lbpxs/ZuyhyUSZ0w+EUtZvk4bMzUcgYUqhVa4YtKp0nFguhDNdSdTHVf4a1sdWcy+38h0L+rmYUZoDWEsma6EsFR0Rcbjfl++nqpvJTYBhFyn6vGZ1Dtl08xVOl+14YPV/nwodtHW8xN+X7eBKv1ILw+1gxObnep/3Uz/Z7v38yDF+AMsPb3gAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAAAwKACfhgC/oQCPeQAYGBhgYGAQDQDvygD/1wDPrwB4eHiAgIAwMDAICAivlABANgBQUFBoaGgoKChQQwBgUQAgICA6G0KLQJ4jECiuUMa6VdN0NYQMBQ2XRasuFTVGIE9YWFgkHSU7KD9ISEg4ODj///9R+SUsAAAAAWJLR0QmWgiYtQAABJVJREFUaN7tWmlzozgQjWG5LEQ4BpJJnGQ8O/v//+LqQkgyarUE+TZdlaqUwTz167vx0xMglyw35B/+UVFqKZ7OkCqrG1OuFUchrRRCO35PdRDk8tw40vOPBwkyTuKm/vlyCORH7YI0M/+8G5g2ZOjkXVlT/zjA1vwIIiljpC3LahJ+lHSY6rnZk9m5SxouFcYD4jxPGy4NxgfCnjdrnzI5TYHxg3DbzD0Dqvr5umOxs0DEI/P86n72HAkTBNmXOQ5lTgKJ5GwnGHGSxfB1TQRp6ohUk8hXnDKXVL6iLJOlg+Dd7IgqTZN/v1UatP3THSyGsv4YCJIy2PZ1nvV9lgOmQ1EGE7YW+AuQ5/qjhG1JFzgMxjAAYUb1gjwRYRggWOxa6FcGgQIEi2Li5fX1J6g0wvy5F0RlqJe39/cbbMCg+QHChCofNwby/vkB3hpEATxMfPf2LuQLVDuI4jeLIOzn2ykofrOI8vQlQaRh5vNRpOOsKK8gu+kostLeTJSqz/Yc4DoHyyXM9Ysyy9uLuv2h16mzHlGSfSiCsI9Ppcovfb8Dg5yWfCi5aRURLkqsDODtYLtl2cYdJMpNzEhL57qA7l8KdXHFoCMfD8s4lK+Cz3vtnT/JzACzOjdlVxcD5C6H0DCKGZOfv9WEvNjfkM4+jds1KUuLRZE+9iptrwZkF0XoW5gnUPwRNIpg45dw43/JPooIKaquDYZd/hAsijiooOy2MuCiCHXLdd1g7jQmpPUV6ayC3T66EaGL9I3Nk5m/bCj+qm/0DNQ4rlGYLbu0LbVDZir/6P/99cVo5sXioiWT9YU6k3G/uoZx9AcBqpgZ2AUtB0n8mv5161GUpB3Zn2V/R6Ceby9Jrfeb/U3BAt+Jfleg/lV0rxaUHqUjh+NgL262fhpEGq0Dz4+lbH3kLPWpts2F3Gbd23FArv4w4x6nbjZWFzKYhHeRkmIUShlf7Ei5I2BSRjE76lEwCWNlz79XtjEwsSMyM1Jl6wJGZIz9tawOt5XEQHZJsEydGWlHlfdtAXySZdwd4qrOf1bWH8pyL4ywK7jHRaXM1lY9VmG0B4PjTO2PWIJmokiSZfGx6u/5A2oLJyO+o3ZVZ2XRCv8B8AcMTG55FvFkMBVGY5cI40T8AqJ4LodhevMhXhQKXw7C4FB22sAomNkwro94fQ7vZXCl82B96nsKhS8/vq2yRZVhGYj+NCzOQcAaCqqjWgoelVCB5L1oIElXs3/jhl1RB9ompU+2m3DqPDwMRwmbue3XIHWez8de63mRDPkWhL/yVzxSnPPuHZSpJPql9beJnJdR/dcBoYHico7AVf0ksRcM3yVLqByfioLo8bkUQ4kbCA+hlNhJ7TiKU51ZPaeBuN7bhgVR7KUWCfYeE4F75H0U80wTCZ2yGEicKivKdijEMXXzqu/hPgQlNTeGdbgB59TLw8nSjeJR9G4ScJ/BBpn0qrWjHpUGR3cMCh9Lt8HU+BnW3Zdz2JzGOCJ6tbihAARYYi4VAKY7c98ftbqxOA/b85FCfDpwUVBZmpE+tmNEraUpKE8xC0Iuxk/9fL/3+x8OvblPw2nB9AAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAb1BMVEUAAACPeQC/oQAjECiLQJ7/1wDPrwAQDQCuUMa6VdNGIE8MBQ0wKADvygBANgB0NYSXRas6G0JgUQCfhgAuFTVQQwCvlAAoKChgYGAYGBh4eHiAgIBQUFAICAhoaGggICAwMDBYWFhISEg4ODj////182M/AAAAAWJLR0QktAb5mQAAA6tJREFUaN7tmOtyoyAYhlO7ancbbVebCIhKuvd/jwuiKMpZ7Exn+v7JQZIHviNwuez0lKj1xB4+/xJ6tg42KUnVynJGefnN9fLnlX68FprBSSglLdnTNw55/zuOLdPolIo9fX2jq3l5e+Vj6/iU0WTUaB8fz9PQWxGfwhezKK+1EDtFa4W0uK3HXe+pXpWNUup/W1S5WEhVGCA8UgIp1DdVSUF5WWWmUWlxtVFy8x+kWZJYRji4xeQYZ1ndYjGZk+wGs5vMrtoOuVyqoxRrhDFdi2OQLHehHPS/nLxnLcbJK0c94xJgh8PM1V5Mt2CbOdvriM3ubvE122xb14ukLss6KWJCdpj75FNjV/GGbDDLz02B4Q9ZY1bdy+Cxog6ALBg5OHWL8QlhFWbqFg0AkL2q68/dORn3GNbdp+LXoLbF7E0Zz1qzbhlfSocppO27i7LKZaHWWpYzmgK3owb2frtjk4LjiCDSUoo63CMbDRzCHbOO5ayKxlgogH0Q7s/qMpKtuPCaktN6lrCyFhXBo5gJNXH/V1LXT0shJ0KEV8Z08ZvfQAX9KDTCIP2VngXlhx3phTPdKQMcK8BDjekGgqaMmr54rELGrikn+2Gdm1s1/faZFP4OAtz3czyrKHA/g/krVwoZw5ggA4Wsq8OkT+RFGWeFZwsoKWB6htYR1fh4f+xguBNpY1qLHBvdQOPFmSL9E1IlwOyEXeo24NOPwluZpszMoeE7ddWMCcCaVIYAtT1Asv9PEKSJD02l4Tuo+4r503rVY8fCG64xuhAgpy5IZMrjTIzI+lMxoP0KzLKWMzNybolxqoseQ+Zi3Z+5kxLL+SdVfQxA3DTi1VruPFjbJbxECzTVZCTeFvdd/2A8dETu6rQtSumPY8SDiCydTUDofnStJUsG9QBgfuwmYKOQL6FAFIEiNhNaw4MIfhHeJ7oRJMaRZ0pEfRke5xEnK00Nku1FT942jdP47tumH/3omwmevgFnx0WE8NmZzc/L5+6/RCc81j2sitLVbTJeMERT+L1cCMX16guDkAOhJwWEHaFCKJvuTPs5seS16jbMSpEvtZB17yHulx2LDNjNqbGeCCBGfkuZKcukHKYpNq9iDIshU1Hb5rBIN8M8xeVhI62NuFPE3aQhfLAMacRVa0c0S8KbtbtQ2LF0OZiKCxJEHrqaQ89p1EZIXC0uFIMBJK0vFQyW7tb3/f5XN8CNojSheznYUpyqNDV63/YevZaEUC6+F4QQyFLk2X8056OB/dTAsQAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeFBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAQDQBANgCfhgC/oQDPrwD/1wAwKADvygBgUQBQQwCvlABYWFggGwBISEiPeQA4ODgjEChGIE+LQJ46G0IMBQ2uUMa6VdOAOpEuFTVwXgB0NYSXRav///9sy2ErAAAAAWJLR0QnLQ+oIwAABKJJREFUaN7tmtl2mzAQQEEYhFkNsrM0Tp2kTf//Eyu0MRLasMMb89Bz6u1q9tGEJFknKVKSrvzqGkp24JLlxXaUBHNIedyQkSQFptpkeEtFmKRVtaFLdtlll1122WWXXX5YjpvOkxJCBzG8MYNNe4dy42lPTK7VphA5hStK3WhS/wilEqM+5oS260+a9F37AyRJQdN/mpNV+nZ4kIIhheoy2ijkQcpRuCWT15aziRkft1hRClVy9ZKBuTxqrGT2CkyXVoO49CiqKvq6AyKM3pEqxoIh0EtIKt6UjLxUzoynVCmrAE/TLw3AZEScO89ERj3zF55AyIRF5GRZwdzsZs8zpxzL+b3LGR4ukpIg7nsZzwalAyfh7527GrwUS8n5FT+zU1r1EVkdkraZ/n3JVlHYqbC0gElpZnXpWVhEDcxkwoqxlKmD4UKljU8XHhvJay0igsZLDOXZMJw4bt3b/SJStyXzAV/CEO5ILryV8TKj8mUURVKGhqioI1lRcWhawMROc4R5KhMJOcu3UHYokWzbZFXVaR1FShpMQSYOTXyZ/Z3xnt9eLMNH2qMaDVVftLR3HKKLgwAXn6ChFYRXsKIypw4CikJQyAmKbFM1UXCmCq1XJdYKr+wLbRSlO+kymY6Ans8Py6IrQ3L7N8yttI+Js8HWeKHomcLzUTNAE0FpAxAj6wVGOLPvSNQEVfchilbBFKYzYsUvjR9BnVTruswZGZ0qAYPNc5FsiXBeI9GQRYRBPVpgENHe1QK4jYutoFtMg0h1fgm/8DTCCOHg/NJEQ2S1lp2Hq4LnpnYXRaT02/Wdym/+H94WOQWmUehi5aTwjL9dPz4neZfqVJin/zASpUq4HTsp7Ki3r08uH2+L78E0Cl3fnBRmsOunlD/G91o9Was7KexH3l0UWo+1wvOTlL+iZA1TPV6OgXdQmHO/JeTfjXmcVce2G+fwQI/5Rff+1fJZMpssT+6k8KS7fbNI/rpxjy/PwQrCA1kpauGUlVcGMdsdN9k0iwa3HSsqzKJ68+pgXJqs4unHBmZxl13TX3yVH7bCs+U4kUOSnwK62GC9/LsvtKaQk1e6VzpxigyxHiNuA+BzDE3Bum6If/7ouxi7OU2m5vOaeEe2KO+4TAZtPlw8lKgJ1tH5R/v4b5GY0dI1K4kTpmnIfZGjjPUHxBIBZfKP1s65LXYqs3mGl8Jynr9cpSh6KrN5BnbC0lzJQJ3jq4yleiy7uj3i465IDpsxt7gWDM5IDNnMDFTmFm0vZ4+ReHvZMBrFvZPV7JXSkTnwOIiO6Zerr4Zdu4i2Y9ZLMgIXwhiM+LZGqcUvgqJm1H1kGZnTHOWpHSNdqm/DlAxCJbO5ILDUEsKWx5kd04GPuCaUmrRmOqLFmY62G4HEtNyXmV0VpyDzUI5jCpvrl2L1mSmGfE/imJO5SrfFOc+9SZH7eKFbHk9Ru8nl9WZSB95/JOSoVq1F7lAJG7p7KNO4cmH64unJLnkxBY9hPblmfHpPozbK1GpxplgN8Lx8CS4VPBFRwH2/uboJC4qjWE0YDVlQov5AR41eHsoVD4jl91AS24LQJ+BRP9fzfv8BSC6kx2DsG40AAAAASUVORK5C"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAe1BMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAwKABANgBgUQC/oQDvygD/1wAQDQCfhgBQQwDPrwBwXgCvlABYWFhISEiPeQAMBQ0uFTWAOpG6VdOXRat0NYQjECiuUMaLQJ5GIE86G0JRJVwgGwDfvAD////+WeObAAAAAWJLR0QovbC1sgAABL5JREFUaN7tWsdiozAQpZgOwsKOkzghTtvd///DFRq1EcUSxjfPyQmgN71BEPhRGCkKPR/1QYl3QHGS3g8lyAAkL+6IEQRpxqSJs3sKwiksyzua5EEPetCDHvSgIKjqhmhq6uoOEA1p95ha0mwKROvOhlBAdCuQw3E/T8duE4GqGTk2FehwBQMEOqw7vBD95JMLCJNnld4K1ohlw4/aCWTA8RaHd3u7fOj2KjdZuDie1hGdazn8Jq4o+/3JC0Z24b4ofjClaPW5YRp3kJY8rUCJls1/JGbSaTvPxJaZKDPZ5djUdEig4qK/JxfCLLEcW0aByfhWFuAXV7hxLkRJgmAa5oT47taAKKvkKTpp1pOY4TrBX1k6jzuGh7EZqUzFSdoiEiSEiyxua46R5MqY7ihlyDPAs50BGsF3EsuIagcNps+Gy1wnEZN5OR2b/MigyI1rxGTOESWIwPbSny0UYnAC1w6EGv9yRUlgxI+nUTp1i8wOQcft8hJ7oXCuMqkBG6XW4jJeuEdV4MiFj/V5BctSFTZLsoBvBK9UeATzF2cUQ3GCXXqctosI3a7RDL74oUApgzSj4kXmK+kaIqO2N/QXYRJlEMoy/atUEkbxLo9iXR1Ot/dLUmFmvgpZ4Ivo51YzM6jLkV1X41JBTyjsZ5nwkYfbwFS0AoEMdn47W0+octoS51JWyzIF99NG+RcX5fzef1w+zQdwXSBeKMBZQ7QPQwa79Iy+vn+EQJVdSn1RbOLPf371QO9nrK2tUHjU//Q9ghGWP7KpCQS/FYVnsO/egiGmrzAj3oTCjESxLH1/ESozw4g6tmRTKEc12zEXU/Qtbm/cDr6Cgvrs88+HAPn4Hf7udCNwE4rdB0lx/gi7cFHSLJJJbxXKuNk6X8Cd3zgKiJLpouZE1JpVRbPFEjQj0W7+fmgUs+Bk7sLgWQIiPk1wVT+/XSD8q7ZRoniUY6uRhCiTzdZYJzVqBHL3ZX09Vpiq89AFIJZQu1E6o2DDoENGx7B8jNhwR8Eqm0J5EmWRLxzGbaAbobnYNK6em4fs2MEoBu4R+doFexm2fjI2HPCRWCOPA5lFA4IO2ibR5GEnNPjwiErb/iIXDlEJr8fsRYOIqNwrKAcyS/kow1iiyOwg2yYPMk+yYMZLphVjJRDSCupPpzZZrdEe/V2rM6OKzazk9EB7OK3W2eBIr6zj7MjchkkvGRzrviDVUfKVYU1p3SytL9XCxA9Fw6j2lzYOyzJPFAljLhGq0+YoANNOt//bofAzZUEWyePqhtEfhc0y/2CJEMXypXW3PYoIMpiXczxizlC3BoVTgovLEvltSBGhqk7uBDK3YBiR90rZpHLnprHVuRmhLO9k1YI0zGS9uwFFj12I9GuLSNfu1ShUjV1mPTVfwUQTLTOr58mVpgBvwxRVUiTrdVI07nX58ni591D75am7aDPajEQjnoqrEwHsSH3GhshmapFN9Ixxz+BDS1/i2J25CrcFPtXysECyJe4oaje5MN5kGKRQq9Y0mREps2R3QRnGUj2YGp9hPc/1+GmZMR3FarWoUVzbaD0uLWo6Nff9ijPnSI3cUCZV6J4ObBSnqYgpPd/lHh+IJWtQuAp98prxqd/c937/AXJIpRYSns4yAAAAAElFTkSuQmCC"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeFBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAwKABANgBgUQC/oQDvygD/1wAQDQCfhgDPrwCPeQAgGwBQQwBYWFhwXgBISEivlADfvAA4ODgMBQ10NYSLQJ4jECi6VdOuUMaXRasuFTVGIE+AOpH///+espuAAAAAAWJLR0QnLQ+oIwAABBhJREFUaN7tmtlioyAUhl3iEhEUbO0yk6TpMu//iINsgkGFEHvlf9GLJM3H4XAWTowiP8WJUuz5rz6U9MCVZvl2lKjgkPK4ISOK8oJakxZbGsIUV9WGLtm1a9euXbt27Xqwjpv2kxJCG7FiYwbr9g6la7cHak3AmSI618qFABFqWk3IFSK78FUKhibBi1KJVn/FMYB0JqBBVE++lGTFDmOvGuLhkkGFA+UZ1HjwO2kEww/BTzG7GzldW/oB0/SejCgvhSmZ2+fJPRDlFddwqduWiPVVlfN1Rzth9I5UzbNi/iZo2poxsnL1yNxSqphlgBc7Jq+yVEQUagbP5y8OB1NbInd+WS3F5rEc30NIX5wjJUq47+V5Nin4VVsJf69HWHvJlZLxK35qpUCiPqKyA2F+eUu9KGxVhdwBk9I39WguXQs7UaDXdtGVMlSwIldho1Nw1xq2iLPxhNm7eUXPizNF2zi5XLlfIueq2QkPXQLHBb75UXgpM9IMaGS+kkeDL71uIPb7ct1BWVIYoUxUKomT9FAmsmxTE999s+WswB8tX8U08EX0R4hn/vvtMUyB9texqGYPsQcTttj8JrXBsVj6lrJbQWYKzVel6a3+vu5iRnxD2OlKEzn9U9XyQRTwPvxVkSJyNWwnCqSYGUxihOc7BOsaoi6YgowMpjDsFMugxLALpLxi05YxIvWyzytDqGRJHLNL28LQL7VgMpms+QCYtN1jYn7GnL/CL8yU0/lyOX88FFOkWtXnppyvVJ/BGJqgqUQd4GVR6y0+PgfK9Ry4/Mys6rQs8vAHDVSmXK+XMIg8Wem0dax5y3fhlK9TCGWMkml3RgzK9TuEksxRaD5miednA8qrKItgyMe698MoqpkoRf89ZEfCr2KsSxZbFuYX5X3WGNVmrofjlv2EQFQg8jRMLBXl9O9hUckLJJjcvvmWnb6Cg9IQmZZHfhX7+P4O8oqp/maQcMe10h8i94zr+QEMQCwQ2u+pEtO/BxKwjBCLOiiHDKH9GOjaJXV8YBJKoR1K064qmDJ0fr9BifAqJogSi/IF1jYtgHJMUvmjNdmMwu/LvP+qN6NkZnHZiJLohRJtRDEHDFtRqsNv7JgxlFr3flwkyR2PgxgUTNS1a4aSaBfCeylSc0lNUCYjb1rPs5WJpjkNUwJWkyTF6HXZ8DhdxKj5su1TNyZJir4m8Q0LE/24SO2mSPWNnTIuanGZXKp5VZ8ZzpD+JA6xU1RLrcJtwRg1PDwatmmD83qFomaTC3PAwoQc1ag1z4RJuDMpxcR2F0peDDc9Od/RHsN6seccNNzT6B6larQ4Uhx/OTCGCvpgYZJhcn3ePx3drCtxo1g33T0dTCm2HbNtenkoPR4Qy2wUQNAo++9ieeWT17RH/eae9/sP8FdqeGw7Z/AAAAAASUVORK5C"></td></tr><tr><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeFBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICBYWFhISEg4ODgQDQBANgCfhgC/oQDPrwD/1wAwKABgUQDvygCvlABQQwCPeQAjEChGIE+LQJ46G0KuUMa6VdN0NYQMBQ2XRasuFTWAOpEgGwCAbAD////DpHYAAAAAAWJLR0QnLQ+oIwAAA4NJREFUaN7tmul2oyAUgCMEUNMxZjFN005N2um8/yMOsoisAafknJ7j/dXE6sflrty4WqVJAUYpEm9NocA1F4hwPsqKcEhZZWSsVphQbSDJqQiToq4zmmSRRRZZZJFFFlnkm6XK2k9KCG3ESGYG6/bWZeZuT3SudVaI7MLzUmrR6uc1jKSArBTyCEolzAJzHltwKVRBOVWRVkkPF1zX0cediYfRM1LtZxX6RYzKBGNKSl2wDLBxY3CNoBZReJPkMiImyzoUm1VpXkt1f8BtL/3ZRXFkB/lVLAXxIz4MUJAjOzzBJApbFZE74KQAOW6YelSVYn1WwQgewyaki+4buKb+kpgwkGO5phGs0K3AUxqFlzJPmpGu8Q25rkCAeEK5AHBdgvxlu6CBX4RSw08Q/Ij103xVkuytGvMuCLJO/1SkbHJixqjPigHrR2CULjkjUpbEzJ2UKO/ZB8BSnV9a1ifAl/SarZImAUOgVXmIu0o023a3PyjZ79ogiSZoKmKTeFm0qz4xEVPCSPKCMNKrOi2LWvgT2x+OnQshQN0xYAp35VyNYaT60aY9HUJyam19VJTUQYq83AT0UPo0nod4KUi73DzfZQzy3CRStDbwfF8Roc5Ze8jYTHgPAkBdPp8iIdQ6Gma0vvdMg9TlXTTEwvBA9Kdhtg7ugSkUA8OiMlQgh16UB2USxcTck7FtSqOkYqQkUg77hBQ6n2LFTR7KoXsIZc6epVMO7UMop+MjKDOU+Q9KEd+Az96xCsD4H61nUHbDffy8HNt/vXRb2rnEp3+5YWjGlOnYJnC2wx0gXCg9MqlmJ9qGBdRjZgkOGCIwsi/y9k7MLLPnch17xiQZetoOjRI7+iKy3jX7g5FxG2ezeZ5BAap2d1Za72yI+I85FF6dm714xOX17fXiVkbmMNc07C6Fdxpn/ojf733fv1+cyuz4XeN8OTLJAGtNDNL3V6cyLbclTFNFUtSiBEQoYyYgLSLVXYMPhZKaGcO3j17I1bVlGkUOyoRuKJ7yKSH92/Bxa1BY0Sc6pBpHrRh5VCKG7ncoPB+T4aQnD6aT17A2vpxDz2k0JcFxtKgor8PH1ozJ0HEp6BF4Ou+/COP3f24u6zv6JBBHkdKwdV6nkKOVme0W1qTcydIdW+ft+vbRf1wZxNqwAWOe/VAS5ev5Rfx1+7zJr3YOefn7Nb1v8qqf732/fyCIkElNn6P7AAAAAElFTkSuQmCC"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAgVBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAQDQBANgCfhgC/oQBgUQAwKADPrwD/1wDvygBQQwCvlAAjECguFTUMBQ10NYSuUMa6VdOAOpFYWFgrGDA7KD9ISEiXRatGIE86G0KLQJ44ODhwXgDfvACAbAAgGwD///9FOOMgAAAAAWJLR0QqU77UngAABHFJREFUaN7tmtl22jAQQG0J73jDCSRQ2nRv//8HK2tDsraRY/elnSdygFzNPhqTJHGSIilp5FdjKPjABGf5fpSkYJCy2pGRJHlBtMHFnopQSet6R5f8lzhpjse2I9Ifm/mPnrwYNke040nI2HXsj6nrNwQN/QOxkKmdVduC0U4nn4xPG9gqwKD6vNNujdtWGudd6jTPEAZVZ713nkCKMHlei3kKemQDTBxkJSYWsgoTD1mBWQM5ndo4SGOJrqlr54Lpw8fljS1Pngf23uDLoWmIoPQ+mze+LIqwmfl/pr7xnmGNzVr/d73KjNA4GwwH9+yNis+TrYdyOq5VhZ+vIoNYMb84+ihAzzhUodPeocytn4gPM9O51Ah8cq3n151PmX5dgFGDiSk8TOkgFNPo1NI1H/ULu7qxJmvt3xIU5Hc/maImQJSZBmNBU6gUMp7ZAmCkE+EAyBjzmPRoFXcLFtcWo2hHTWYGhRosL7kqmfzgAiOKKUwMt3SqV8rc8UlnA8vr2nLd6bwUEmHny+XystRaVi9yg1JvaXlWSmfCKfX59Xq73T7MGLUC9PzcGeYZxSF3JWS8FDUny48zg8hF/ygL9qp85C0TLfy9FBZjiPn+9WalUH216sDth8EUao2MhvGnq53Syo+I6sDlDUMpj4MWl5udoqhLzqJGVAX0vjA6QkX+8hmgy+GuRVlNOgaAopbyLwxyPSdaLdL8oqYu0we9AShKK3+hgXz9quWLuCWJUmcePQFQtMQ+f/n2eqavRPmXo0eK8KFEWPc/nGItUsJg6nyTksRfZL9d7A2KTq8aSo6foAa8FM98oo5+EsKclgPOr4p3Phn5FkG51LL55n4oi6g9k3dyoKbru0cMs2Si0YVRxPbPOzkYomfKHYwZou5HetZHYNoYilbBYjBHMII4qdF1gWQkkwa4Sxjl2kq0RFh1ifG/thPh7T1qAQxRZnnnEup816p+QdqFM43C13DzYscuHlo/5mnkxATDjF+F0mze93MjsbZodn1nPIRyhmV8nuldnbRFLf2LUDwEbNZpkeWyCTLn0SibLTK+9lJcbyehLd8i4x3/JgtS/Bgb5cew/BeWMTAK0yvOFffmn+bWAoX84sfo3qeD0WBZjWS2uQmO4W2YJaK7DNNz4FAPbXpXQPORYs5KX4Ocr3CAIu3a9UJXR6Cxya3O+7bhpjgeJmgbs0049mX/uOXDF2o39SGPEtC/fm/LmUGdSprYo6sdpDk+ZGNr/SOS/oUHvRXC+z+0ZmumnR/Ai05Y7qtNuKtvIHIvtyvFtpfbjwKc8dMCxVwIV1JQ3E3tPZRFdyb9PAvktW0bFqToSy0cnD3kfhlYZJBxpgqHTpkWOE4VQXkcCnBMObzKz8wx5CtqyxyW6eY5p1weVppuGZwigscXPoUOqeSqNc8cKhUL3SGU+Vr6uJgqP8O6u2oOuacRG+G3xKAExmgp6lLBY+lc3ffHr24QjGI1IbwcLCmgKk2MXh7KiF6braEksQtC5ad+rt/7/QHr5NNzR5lYvwAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAe1BMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICBYWFhISEgQDQBANgCfhgC/oQAwKABgUQDPrwD/1wDvygCvlABQQwA4ODggGwDfvABwXgCPeQAjECg6G0KLQJ6uUMZ0NYQMBQ2XRau6VdNGIE8uFTWAbAD///9hCxKeAAAAAWJLR0QovbC1sgAABCxJREFUaN7tmmlzmzAQho0wCHAAga+m8R03+f//sEIXuhExdKYz7KcMNn60x7srabJajbMICItGvjqGEq+pxUk6H2UFKSTLZ2SsVinE3sRwTkeIRUUxY0oWW2yxxRZbbLHFJrZ81v0kh+CNGJyZQXZ762zm3R7buRazQvgufF5Kwbb68yaGU8CsFPgvKDlLSzznsSXNmCvJnK7wrIyXS1oUwccdqcLwGalwsyL1wzTJRiSTU4qIdICNHZMWSawoKt2MKhmmyazwaTPP9M/Glj+guef1bKNYugN/FEpJ6BE/9lASS3d4i0dRyKogj4CVAvh1g1xR+ZjskwkGUyEbny9qbaQFrpeRDSOxLFdPgiHdHLyNo9BR5mgzvDQm6HVRAqBDyhGI1xmYf2xHWPiRrzX8D5bOsf6yqhGzhkA26wxOulUrqxZtd9z2hEKqKwaT3f41dU/oDHUPhVI2U2DKFu13qtXdc6H6KTDNYWdY1X0A1pNhylr3Y7dHdan68qoiTUe2bcM+4yPx5e5y1B3ZUzcYJuHN+qULYBNyVL/A3fmldH0IwAgZDUJ4t1YnD3ROiSAILWDSoLGxINGxSCjv9NN4TD2YEKr4NFGnOh6LVP7N774jhNZDY0Co4kVlGTGpFBkF7UdLixY1xeu7gFoVa8jBqjYhuuK1n8ERVpYRQLHEy075qKiAmq5HICn7ARRbvHa7VkouCzxezRa1eO7s+/IAoXlpbRAt+wnNuLmOJPDIU26tlC0JDhMibcO1ax0BqrS7wpZKVUkHpJ4+pqgsSJTIQTE6jFGJtDsEbZusBWbDWNrDcfDXnSuUfqUtfRAeswBz5J6XAJ9iTW11+VCGUaqd39CprrhCfMv4ccDwzG+rEu/NvO6GRM2dexwO/n7Zer5FW5E/KwcPRIp54/leO0hp3S+rkfAsBw1SkJvCBvL5PBTaQYonK9SVy/V2uz/8ZTJI8RQYeffx+cT2een+rn5K8SmSBOzPk9jnw+f3EMWnSFKfV0p5fvlyOET5QO5O2YiAvUrBYXDpmrz69ZwiYiQ3h2HKNSz7EQTOA6G1BLZHk9JtLJTzpk4BviOURf+suSiUkjUco6mpFG0643meRHZneHNhhfy8a8lUXdIo6qVWLJ60jhhcbhRyO9sCLVxqVYrsTC6dCAxniCLP95vdFW58RFcapXdGXIOTJ7oSFEX2rnQ1JP8nTm2niN2suM+jzrQ+yu3CGbG2i6wGKOJukh5vdCmQSN9VSC6uWtOEuUQj3c8hqEVsgEKy/7hfsd1ZuKR/w9qI9SJV+vichmMUi6vFnpJIAe41ae5/5EsFNdJI/loq3/drVzdGHzRHOXBSPGMfypAmYGuqU0TEfBulFIJsnbGytExMae9aNraICQpaeU1cEL4fkMVO3+RA//59OpEYA9VI9E/4e73XfwEH9LTeaK95nQAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAe1BMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICBYWFhISEg4ODggGwBQQwDfvAC/oQBwXgBANgAQDQAwKACfhgDvygD/1wDPrwBgUQCvlACPeQAjECh0NYSLQJ4MBQ2uUMa6VdNGIE86G0KAOpEuFTWAbAD////BUFJcAAAAAWJLR0QovbC1sgAAA8tJREFUaN7tmulymzAQgEEYBDg1pdz4Suy2ef83rNABWiFshJFnOsP+SUY2fKu9pcRxzMRFvbiGj5pQvB0Tzw/sURzMIGFkkeE4ASa78bDNjVBx49iiSzbZZJNNNtlkk01WlsjqPCkgZBDDlhl02tuFlqc9PrnGViFiCrdLifmob9cxgoKsUvA7KBF3i2fz2BKEfCu+za0Ir5inSxDHs487UoSRM1I8zXLhh4EfGjhTUGKXVoC9HhPEvgcyKtgbhQzPyTB+lJtRqH5mGv6I+V7Es46iqQ5iaS7FZ0d87wHF11SHD8+IQrXCwgJaChLXDXJERSbepx0MB33aPNoLjI0gJvFiWDB8jbqqE0apG6EPMwprZRNlRoTGCrXO9RGeSGUXebsQ2W/bLkl891Fp+B8keIf+pF6F2PqoRqPLQ1Zv/4ZM2dvE9FlvFYN278AMe7GZkaIlWp6keHu3fgEstvMDVH2M0LppxKo17Dx4sksYCSnQRLiRWFscd/0X4yHwYVcnbRGkP14jHvrImrIJWjqPyjJkiToFHADltYMVmqIkP9NEVmNNyq8sp8tFWdV12v22yiGxHyao4YuqbtI2K1PCqOuqGPR4zS+99+lglNVA2sFkS488OTMOT0RWhktISXs9lmZlfmSqsqxkGVJUkMJM1s2iC5MyachLEmVR2Updl0yNpWNTwtybaBbBZpJFb1feV7X5I4iwGZPDQgiRpuXvoRkylmOvRnJcDOkC6VRmIkM00rRdLBZZWaVLIRVJwTzP2qZ+JE1KdTCiSJCjsHreVvVTMaHkg95HyfXFcU1KPrxNjh/wweuUVk05x+XFo3hmtPkUyV5sKxHyxB+ty9UopfIQOy+z+StbiyJbhRrMh81lHYrklTrrFkBXT9ehSF5hboEXDCtRMvWZeGfBYuUUBc3zvovR8wOhbLAmGVO6wSJr02aSguYcoSRleXEBlJwXnKmixilKdyb93AdDwWAwUVx0t2Gdh7RbEhR4qeWpK6n0wPCVqQlltCVBkXWKRicCyS00I13s6bciRGnRPWVQSqOm5BaQkcN3zpfr9fKpj0mJ0k+zfbpJek5RxEXZ+fJ1I3LXhouW0t9NSscb6Rk672EI+U0Zt9vV+bzzLeUNpGBl708orB7j7qQnDqZnDrl93f90P/7CeKEPkXMasZHXXy0OFF9HaaRezOV+g3LpFltIceiN/+Bp3dWNbOV2RLnOo0DB4xsVmTIeTVWKzmIjIUYPdyH4BzEQMdLsmhc6i82iOOMLwiIFcvqmg+/h+3Si3r9COXeLJ/DAP+NzmDdDyNJ+AAAAAElFTkSuQmCC"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAQDQBANgCfhgC/oQBgUQAwKADPrwD/1wDvygBQQwCvlACPeQAjECguFTUMBQ1YWFhGIE+uUMa6VdM6G0KXRat0NYRISEiLQJ6AOpFwXgA4ODj///8peH0JAAAAAWJLR0QmWgiYtQAABHdJREFUaN7tmolu4yAQQB07Nr5x6qRJ03p7bPf/f3GBAQz4CGBTaaUdqVKqJH7MDHMwJIrc5BBLOTh+1YWSHEGSNAtHiRBA8iIgI4oyRLRJUEhFmBzKMqBL/sueUtV10yqC625/RHN6MqVv8Z6gDk8RHNTU1V5q9E8rcjrvwFhUQ9Fnq926yyMG42xSp1q3laqOv3fsFAFpfCFnS0WYtD8B8aW4QTwpjhA/iivEi+IM8aFUD+P936FE+Eco7so4UQreTzYhKQVpxBB9UYejsG7vmNNurwsXL7xzLenrNhRFdOFhKSVv9ZljHPZyT/umZ1dKvO7+U9sqTiNNTOewvaRbgLLQuZww7Yw68aZ7Y1FwtyTi2DJJmWrzxd507yqynKuSRtE85qKtu/FqXYRX8kx7kgLR25RadhRZWVofd5QdRs5IZcafNHpEQK6320vE4rZmjDSXzrSnlAeWAe5mBsDsUy+317dhuNGXbU8tmN2VLfNYeEzm5XxsskdGv94HKkBp1cVZUqIYfC/2s0Fhj7y+DSPl3Fbj4qwpKRzxk3kK8/QrQIYP2BvML5+JE4WtCgkLmBT2xC9OebvS/zrYyIWL91kFQ5kMmzVdht90l0XPsO2ykuwXa4piOGI6GgBKYdb8MgyvzGR4XOCnGwVKGaQZGS8iX30Iyhd7u8f+B4pDGiMIZZH+ZSq5fr0N7+QP/I/NrOMlwmBqvrqSwOfRz7y2+fhaXbSwX1zEJn0kBDJYVpozJllO+9a1lH3zQYFyNmaqkHyVIy3x6nXBrbes2cpwO+5hyGAs8SSxmP51Zil1o0x7V/Z9OWW8Z7q1/CjT3pVFfSoSD8fwxZxaXIPijpRJ88IyWHw0MGwXi6AkTnSk6CYjTqp0XcZ+TQ2j6tuNopr8JCdToiSq/Rp2fLAmsgxrYw9e3uUAuBkbAT9ppnlFVecP9wuEEYpj5DWuBWWmzRZka1F5QBUkq4SfMrzZIgmaCG83oSwCRQ0j5EOh2wwiPkv1qk7KIoR/12OpikM51gTzKJM7a2KTWguj3GtYT9KxEfHlxKhasJbOCLCZEfHGY0g+1pbhR4nO3Qzlm5fFjuZjLYl6UkBEnynPzTQ7NnAU65V1+PlFiPQ+O9MYeRSPJku3QGQgQho2asK4C/2iUhUalVAgzUEDj6jcMygXZL680SPVjldb0/Hftom4JUTYbD/p5kfxl31uRUDw89KECYYMO8nsTRK0BRu6/lmQfisW6Gbs35fDD1z0FnES/tIazsuBL+BFJdxWPR7KtqpuKfqAIZTMzeXCUWxHXyiOPX4O4kiJlQNhYIpRnUk9Tx/EtWjpLMt6PO112fB4vfeQ82XLJBNP1lQ8PBEcUOKmiqCMi7JYpmxe5WfoHlpLamYMy3BbWaf4jpjHc91Se4qcTa5sH6RDCjlqzdIFlZChuw2FHkvHg6nyM6z7Us4h5zRio0SOFkeKbRutDhVWLJ2p835zdPNYYjvKrAnt04FJscrSxOj5MXeotakPJZobEK6J8lO/pd/7/QVtFKVlDb+NpAAAAABJRU5ErkJg"></td><td style='text-align:center;vertical-align:middle; margin: 0.5em;border:1px #90999f solid;border-collapse:collapse'><img style='max-width: 100px; max-height:100px;display:inline' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAflBMVEUAAAAYGBhgYGB4eHiAgIAwMDAICAhQUFBoaGgoKCggICAwKABANgBgUQC/oQCPeQDvygD/1wAQDQCfhgDPrwBQQwCvlAAMBQ0uFTUjEChGIE+XRau6VdOLQJ5YWFiAOpGuUMZpMHc6G0J0NYRwXgA4ODjfvAAgGwBISEj///94P8zSAAAAAWJLR0QpyreFJAAABA9JREFUaN7tmnl3nCAQwBUPvCAuuJuk3WyT9Ei//ycsyyXiquBCXt9r569Ut/6YGeZgNEn8JAVaUs//6kPJciFZUcajJFBAqjoiI0lKyLTJYExFuKRNE9El/660HcJKHiIhEO4Po+AICNJRExGFQtBwsCU45ThnBKe0tq1iUI43GWEphC5AQlLI6XCITlmBhKOsQYJRViGhKOuQUBR6+ATKUpwEpbQbkDCUDXuFoWzZKwiFDFsQP0p9s5/sNiFelJo1YnCHV3wovNvLq1m3t7nBvCiyc23s62gb4k5RXfiMgkNSGtnq247ZMljv1Y8pCrCuWztswGYj1tOudXaJ4ZYZxXTLgDpybSplZe6pH0LsYn42so8t2Fg3URd5NuiPnoykrKQqhX1HUU6TddM9EO2VebhIyolMrjJvUfHX4xOTZz8K5GekprQpg4Kk4ibbeR1nfPl6ZvLiR2lSngEupUVBwq5NkcmIwv3Vgo/fzmcPiozJqpnFJqfwRyZ1Nd7DPBCfzl6UBAjfq/1sUbCxEnHviK82fH71oxTiiJ/dplD9E50dKPfL26sXhS8UKvfYlG5Ul62F16BWbOR3H+/zCgZLHTZrusi98SC23ePT91d3imE4tdwFv8jQpUj95P3lzY8iSpmZZuiYr9TWELmu6xHxe7jpoAJAs/h3YypJQZZXQJVtZGede6Qz81XKAl9GPzelmUHvErKwXtU/hdPnmlvsNKrrTo99S9ki5JJXE29Z/WaYnp/vrgyo6V9rDy+CUHSkyFw9a56CUHTUS4z0/IBR1yE8BKKA3MLwXayCkqAhsC5jRJphRH6EoLAtlk+zi6qeQaUsVLIWA2A6NgJhOVKdn9IvXJUSgmnSux8DM6PqC1WgVSV2CkvQTGQdEM2F0VvIMIL7n8+XL9sA1TqXDRTh3/ZIqzLvrD0hamfNbNJNGoHqrmH9GCX2yYlO241mx8O1gCUKy8eTdiMGhQ9I523gXtHNhGF4QsVRTLS0IIBftPeNM40ekKLRZMVegMSIQLxM1tqexorC1xEmKu3XY2ICL0x27UXvDMpFId1JHcXSpon3aosg/Mv/WLlD2oeP8R8f+5/jLsfTp+gVsL/8L3+LpJ/worcGWfyX1uK8HPkFvKqE91WPTQlS1bfkxoAhgizP5WJQHHu6FM7rXXgKmNfuWBSrOrN6XmzE9XQa5kiZdBp8eLzee+j5smOSAbM11ZsnghRmfqooyrgoh2Xq5lX/5rqH1pKaHcM63FbWqYeH9US3wp2iZ5Mr2wdOIUp7wA5OCypBS3cXyvVYOh5Mjc+wLks5h53TmI2y38mM4tpGm0OFFUuX5udN9uhmW4Ab5aYJ3dOBTXHK0szoVV551NpiDyW5NSBcE+NTv6Xv/f4AqApoZirl+HkAAAAASUVORK5C"></td></tr></tbody></table><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools._get_locality_mask" href="#SegmentationTools._get_locality_mask"><code>SegmentationTools._get_locality_mask</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">_get_locality_mask(cell_mask, foreground; dist=(mindist, maxdist))

Given a boolean matrix of the pixels belonging to a single cell,</code></pre><p><code>cell_mask</code>, and a boolean matrix of foreground pixels, <code>foreground</code>, this function  identifies the local background ring around the cell that is at minimum <code>mindist</code> away from every cell and a maximum of <code>maxdist</code> away from the target cell.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/segment.jl#L128-L136">source</a></section><h2><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.find_peak_center" href="#SegmentationTools.find_peak_center"><code>SegmentationTools.find_peak_center</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">find_peak_center(x, y, h)</code></pre><p>Given two equal length arrays, <code>x</code>, and <code>y</code>, computes the half width at <code>h</code> relative to the maximum of the peak in <code>y</code>, i.e. for <code>h=0.5</code>, this function returns the value of <code>x</code> that corresponds to the half-width half-max. This is a robust method for identifying the center of a peak.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/utils.jl#L119-L126">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.light_source_contrib" href="#SegmentationTools.light_source_contrib"><code>SegmentationTools.light_source_contrib</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">light_source_contrib(img, seeds, dist, h)</code></pre><p>Computes the contribution of the light source fluctuations for each time point by first identifying background pixels by finding pixels that are more than <code>dist</code> away from true values in <code>seeds</code>. A kernel density estimate is then fit to the background pixels to get a continuous distribution and then <a href="#SegmentationTools.find_peak_center"><code>find_peak_center</code></a> is used to identify the &quot;average&quot; response of a background pixel.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The distribution of background pixels often ends up being quite non-normal, likely due to misidentification. Empirically, I&#39;ve found the finding the center of the kernel density estimate to be more robust than simpler statistics like mean, median, or even the maximum value of the KDE.</p></div></div><p><strong>Rationale</strong></p><p>Certain light sources, especially arc lamps, exhibit substantial variance in total brightness in time. Additionally, the background signal is dependent on the total light delivered and we can use that to identify the arc lamp wander and subtract it from the whole field of view at each timestep. This gives us more stable total fluorescence values over time.</p><p><strong>Example:</strong></p><pre><code class="language-julia">a = img[Axis{:position}(2), Axis{:channel}(:EPI_mNG)].data
b = img[Axis{:position}(2), Axis{:channel}(:EPI_BFP)].data .&gt; 0.01
SegmentationTools.light_source_contrib(a, b)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/utils.jl#L68-L100">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.flatfield_correct" href="#SegmentationTools.flatfield_correct"><code>SegmentationTools.flatfield_correct</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">flatfield_correct(img, flatfield, darkfield)</code></pre><p>Computes the flatfield for the given image <code>img</code> by dividing the image by the flatfield after subtracting the darkfield from both<a href="#footnote-1">[1]</a></p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This function assumes that the flatfield image has <em>not</em> had the darkfield image subtracted yet.</p></div></div><div class="footnote" id="footnote-1"><a href="#footnote-1"><strong>[1]</strong></a><p>http://nic.ucsf.edu/resources/how-to-acquire-flat-field-correction-images/</p></div></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/77d5b994716a9ff80e6fda08f7a71a4ab6ac31a3/src/utils.jl#L43-L55">source</a></section><footer><hr/></footer></article></body></html>
