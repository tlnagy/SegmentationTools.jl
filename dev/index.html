<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Segment cells with Julia · SegmentationTools.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SegmentationTools.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Segment cells with Julia</a><ul class="internal"><li><a class="toctext" href="#Flow-1">Flow</a></li><li><a class="toctext" href="#Segmentation-1">Segmentation</a></li><li><a class="toctext" href="#Linking-1">Linking</a></li><li><a class="toctext" href="#Analysis-and-Plotting-1">Analysis and Plotting</a></li><li><a class="toctext" href="#Miscellaneous-1">Miscellaneous</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Segment cells with Julia</a></li></ul><a class="edit-page" href="https://github.com/tlnagy/SegmentationTools.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Segment cells with Julia</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Segment-cells-with-Julia-1" href="#Segment-cells-with-Julia-1">Segment cells with Julia</a></h1><p>Welcome to SegmentationTools.jl! This is a random collection of functions that I&#39;ve implemented for segmenting single cells from microscopy images.</p><h2><a class="nav-anchor" id="Flow-1" href="#Flow-1">Flow</a></h2><p>The general procedure follows the following format:</p><p>Segmentation -&gt; Linking -&gt; Analysis</p><h2><a class="nav-anchor" id="Segmentation-1" href="#Segmentation-1">Segmentation</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.segment_cells" href="#SegmentationTools.segment_cells"><code>SegmentationTools.segment_cells</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">segment_cells(img, seed_channel, segment_channel, maskfunc)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/468b7a15209dd73443fa94ad45e79f2a76109ee7/src/segment.jl#L3-L5">source</a></section><h2><a class="nav-anchor" id="Linking-1" href="#Linking-1">Linking</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.build_tp_df" href="#SegmentationTools.build_tp_df"><code>SegmentationTools.build_tp_df</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">build_tp_df(img, segments, signal_channel)</code></pre><p>Build a <code>DataFrames.DataFrame</code> that is compatible with trackpys <code>link_df</code> function. Needs to be converted to a <code>Pandas.DataFrame</code> before passing</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/468b7a15209dd73443fa94ad45e79f2a76109ee7/src/segment.jl#L45-L50">source</a></section><p>I generally use it like so:</p><pre><code class="language-julia">particles = SegmentationTools.build_tp_df(img1, segments, :EPI_mNG);
using PyCall
tp = pyimport(&quot;trackpy&quot;)

import Pandas
# convert particles to a Pandas DataFrame and call trackpy
t = tp.link_df(Pandas.DataFrame(particles), 5);
linked = DataFrame(Pandas.DataFrame(t)); # convert back to Julian dataframe</code></pre><h2><a class="nav-anchor" id="Analysis-and-Plotting-1" href="#Analysis-and-Plotting-1">Analysis and Plotting</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.create_cell_grid" href="#SegmentationTools.create_cell_grid"><code>SegmentationTools.create_cell_grid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>r   create<em>cell</em>grid(img, tracks; win) -&gt; grid</p><p>Given a xyt image and set of tracks, creates a grid of all tracked cells with the cells centered in their grid location. Helps to quickly diagnose weird cell segmentation behavior.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/468b7a15209dd73443fa94ad45e79f2a76109ee7/src/diagnostics.jl#L1-L8">source</a></section><h2><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.flatfield_correct" href="#SegmentationTools.flatfield_correct"><code>SegmentationTools.flatfield_correct</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">flatfield_correct(img, axis, darkfield, flatfield)</code></pre><p>Flatfield correct <code>img</code>. This function subtracts the darkfield, clamps the output to positive values, divides by the flatfield, and then rescales and rebuilds the original image perserving the properties and axes.</p><p>For example, to correct along the DAPI channel:</p><pre><code class="language-none">flatfield_correct(img[Axis{:channel}(:EPI_DAPI)], darkfield, flatfield_dapi)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/468b7a15209dd73443fa94ad45e79f2a76109ee7/src/utils.jl#L21-L33">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SegmentationTools.get_background_means" href="#SegmentationTools.get_background_means"><code>SegmentationTools.get_background_means</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">get_background_means(img, seeds, dist)</code></pre><p>Computes the average signal of the background area, which is defined as areas in <code>img</code> that are a distance <code>dist</code> away from the true values in <code>seeds</code> for each slice in time.</p><p><strong>Example:</strong></p><p>a = img[Axis{:position}(2), Axis{:channel}(:EPI<em>mNG)].data b = img[Axis{:position}(2), Axis{:channel}(:EPI</em>BFP)].data .&gt; 0.01 get<em>background</em>means(a, b)</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/SegmentationTools.jl/blob/468b7a15209dd73443fa94ad45e79f2a76109ee7/src/utils.jl#L50-L62">source</a></section><footer><hr/></footer></article></body></html>
